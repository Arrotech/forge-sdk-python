<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>autodesk_forge_sdk.auth API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>autodesk_forge_sdk.auth</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import requests
from enum import Enum
from datetime import datetime, timedelta
from urllib.parse import quote
from .base import BaseClient

BASE_URL = &#39;https://developer.api.autodesk.com/authentication/v1&#39;

class Scope(Enum):
    &#34;&#34;&#34;
    Authentication scopes.
    &#34;&#34;&#34;
    UserProfileRead = &#39;user-profile:read&#39;
    &#34;&#34;&#34;The application will be able to read the end user’s profile data (not including associated products and services).&#34;&#34;&#34;
    UserRead = &#39;user:read&#39;
    &#34;&#34;&#34;The application will be able to read the end user’s profile data, including associated products and services.&#34;&#34;&#34;
    UserWrite = &#39;user:write&#39;
    &#34;&#34;&#34;The application will be able to create, update, and delete the end user’s profile data, including associated products and services.&#34;&#34;&#34;
    ViewablesRead = &#39;viewables:read&#39;
    &#34;&#34;&#34;The application will only be able to read the end user’s viewable data (e.g., PNG and SVF files) within the Autodesk ecosystem.&#34;&#34;&#34;
    DataRead = &#39;data:read&#39;
    &#34;&#34;&#34;The application will be able to read all the end user’s data (viewable and non-viewable) within the Autodesk ecosystem.&#34;&#34;&#34;
    DataWrite = &#39;data:write&#39;
    &#34;&#34;&#34;The application will be able to create, update, and delete data on behalf of the end user within the Autodesk ecosystem.&#34;&#34;&#34;
    DataCreate = &#39;data:create&#39;
    &#34;&#34;&#34;The application will be able to create data on behalf of the end user within the Autodesk ecosystem.&#34;&#34;&#34;
    DataSearch = &#39;data:search&#39;
    &#34;&#34;&#34;The application will be able to search the end user’s data within the Autodesk ecosystem.&#34;&#34;&#34;
    BucketCreate = &#39;bucket:create&#39;
    &#34;&#34;&#34;The application will be able to create an OSS bucket it will own.&#34;&#34;&#34;
    BucketRead = &#39;bucket:read&#39;
    &#34;&#34;&#34;The application will be able to read the metadata and list contents for OSS buckets that it has access to.&#34;&#34;&#34;
    BucketUpdate = &#39;bucket:update&#39;
    &#34;&#34;&#34;The application will be able to set permissions and entitlements for OSS buckets that it has permission to modify.&#34;&#34;&#34;
    BucketDelete = &#39;bucket:delete&#39;
    &#34;&#34;&#34;The application will be able to delete a bucket that it has permission to delete.&#34;&#34;&#34;
    CodeAll = &#39;code:all&#39;
    &#34;&#34;&#34;The application will be able to author and execute code on behalf of the end user (e.g., scripts processed by the Design Automation API).&#34;&#34;&#34;
    AccountRead = &#39;account:read&#39;
    &#34;&#34;&#34;For Product APIs, the application will be able to read the account data the end user has entitlements to.&#34;&#34;&#34;
    AccountWrite = &#39;account:wriet&#39;
    &#34;&#34;&#34;For Product APIs, the application will be able to update the account data the end user has entitlements to.&#34;&#34;&#34;

class AuthenticationClient(BaseClient):
    &#34;&#34;&#34;
    Forge Authentication service client.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http
    &#34;&#34;&#34;

    def __init__(self, base_url: str=BASE_URL):
        &#34;&#34;&#34;
        Create new instance of the client.

        Args:
            base_url (str, optional): Base URL for API calls.
        &#34;&#34;&#34;
        BaseClient.__init__(self, base_url)

    def authenticate(self, client_id: str, client_secret: str, scopes: list[Scope]) -&gt; dict:
        &#34;&#34;&#34;
        Generate a two-legged access token for specific set of scopes.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authenticate-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            scopes (list[Scope]): List of required scopes.

        Returns:
            dict: Parsed response object with properties `access_token`, `token_type`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            client = AuthenticationClient()
            auth = client.authenticate(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, [Scope.ViewablesRead])
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;client_credentials&#39;,
            &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
        }
        return self._post(&#39;/authenticate&#39;, form=form).json()

    def get_authorization_url(self, client_id: str, response_type: str, redirect_uri: str, scopes: list[Scope], state: str=None) -&gt; str:
        &#34;&#34;&#34;
        Generate a URL to redirect an end user to in order to acquire the user’s consent
        for your app to access the specified resources.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authorize-GET

        Args:
            client_id (str): Client ID of the app.
            response_type (str): Must be either &#39;code&#39; for authorization code grant flow or &#39;token&#39; for implicit grant flow.
            redirect_uri (str): URL-encoded callback URL that the end user will be redirected to after completing the authorization flow.
            scopes (list[Scope]): List of required scopes.
            state (str, optional): Payload containing arbitrary data that the authentication flow will pass back verbatim in a state query parameter to the callback URL.

        Returns:
            str: Complete authorization URL.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            client = AuthenticationClient()
            url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
            print(url)
            ```
        &#34;&#34;&#34;
        url = &#39;https://developer.api.autodesk.com/authentication/v1/authorize&#39;
        url = url + &#39;?client_id={}&#39;.format(quote(client_id))
        url = url + &#39;&amp;response_type={}&#39;.format(response_type)
        url = url + &#39;&amp;redirect_uri={}&#39;.format(quote(redirect_uri))
        url = url + &#39;&amp;scope={}&#39;.format(quote(&#39; &#39;.join(map(lambda s: s.value, scopes))))
        if state:
            url += &#39;&amp;state={}&#39;.format(quote(state))
        return url

    def get_token(self, client_id: str, client_secret: str, code: str, redirect_uri: str) -&gt; dict:
        &#34;&#34;&#34;
        Exchange an authorization code extracted from `get_authorization_url` callback for a three-legged access token.
        This API will only be used when the &#39;Authorization Code&#39; grant type is being adopted.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/gettoken-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            code (str): The authorization code captured from the code query parameter when the user is redirected back to the callback URL.
            redirect_uri (str): Must match the redirect_uri parameter used in the `get_authorization_url`.

        Returns:
            dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            client = AuthenticationClient()
            url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
            # redirect the user to URL, and wait for callback to http://localhost:3000/callback
            code = &#39;...&#39; # extract &#39;code&#39; query parameter from the callback
            auth = client.get_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, code, &#34;http://localhost:3000/callback&#34;)
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;authorization_code&#39;,
            &#39;code&#39;: code,
            &#39;redirect_uri&#39;: redirect_uri
        }
        return self._post(&#39;/gettoken&#39;, form=form).json()

    def refresh_token(self, client_id: str, client_secret: str, refresh_token: str, scopes: list[Scope]) -&gt; dict:
        &#34;&#34;&#34;
        Acquire a new access token by using the refresh token provided by `get_token`.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/refreshtoken-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            refresh_token (str): Refresh token used to acquire a new access token.
            scopes (list[str]): List of required scopes.

        Returns:
            dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            refresh_token = &#39;...&#39; # retrieve the refresh token, for example, from cookies
            client = AuthenticationClient()
            auth = client.refresh_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, refresh_token, [Scope.ViewablesRead])
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;refresh_token&#39;,
            &#39;refresh_token&#39;: refresh_token,
            &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
        }
        return self._post(&#39;/refreshtoken&#39;, form=form).json()

    def get_user_profile(self, access_token: str) -&gt; dict:
        &#34;&#34;&#34;
        Get the profile information of an authorizing end user in a three-legged context.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/users-@me-GET

        Args:
            access_token (str): Token obtained via a three-legged OAuth flow.

        Returns:
            dict: Parsed response object with properties `userId`, `userName`, `emaillId`, `firstName`, `lastName`, etc.

        Examples:
            ```
            access_token = &#39;...&#39; # get a three-legged access token, for example, from cookies
            client = AuthenticationClient()
            info = client.get_user_profile(access_token)
            print(auth[&#34;userName&#34;])
            ```
        &#34;&#34;&#34;
        headers = { &#39;Authorization&#39;: &#39;Bearer {}&#39;.format(access_token) }
        return self._get(&#39;/users/@me&#39;, headers=headers).json()

class TokenProviderInterface:
    def get_token(self, scopes: list[Scope]) -&gt; str:
        &#34;&#34;&#34;
        Generates access token for given set of scopes.

        Args:
            scopes (list[Scope]): List of scopes that the generated access token should support.

        Returns:
            str: Access token.
        &#34;&#34;&#34;
        pass

class SimpleTokenProvider(TokenProviderInterface):
    &#34;&#34;&#34;
    Simple implementation of `TokenProviderInterface` when you already have an access token that you want to use.
    When using this approach, make sure that the hard-coded access token supports all the scopes that may be needed.
    &#34;&#34;&#34;

    def __init__(self, access_token: str):
        &#34;&#34;&#34;
        Create new instance of the provider.

        Args:
            access_token (str): Token that will always be returned by `SimpleTokenProvider.get_token`.
        &#34;&#34;&#34;
        self.access_token = access_token

    def get_token(self, scopes: list[Scope]) -&gt; str:
        return self.access_token

class OAuthTokenProvider(TokenProviderInterface):
    &#34;&#34;&#34;
    Helper class that automatically generates (and caches) access tokens using specific app credentials.
    &#34;&#34;&#34;

    def __init__(self, client_id: str, client_secret: str):
        &#34;&#34;&#34;
        Create new instance of the provider.

        Args:
            client_id (str): Application client ID.
            client_secret (str): Application client secret.
        &#34;&#34;&#34;
        self.client_id = client_id
        self.client_secret = client_secret
        self.auth_client = AuthenticationClient()
        self.cache = {}

    def get_token(self, scopes: list[Scope]) -&gt; str:
        cache_key = &#39;+&#39;.join(map(lambda s: s.value, scopes))
        now = datetime.now()
        if cache_key in self.cache:
            auth = self.cache[cache_key]
            if auth[&#39;expires_at&#39;] &gt; now:
                return auth
        auth = self.auth_client.authenticate(self.client_id, self.client_secret, scopes)
        auth[&#39;expires_at&#39;] = now + timedelta(0, auth[&#39;expires_in&#39;])
        return auth

class BaseOAuthClient(BaseClient):
    def __init__(self, token_provider: TokenProviderInterface, base_url: str):
        &#34;&#34;&#34;
        Create new instance of the client.

        Args:
            token_provider (TokenProviderInterface): Provider that will be used to generate access tokens for API calls.
            base_url (str): Base URL for API calls.
        &#34;&#34;&#34;
        BaseClient.__init__(self, base_url)
        self.token_provider = token_provider

    def _get(self, url: str, scopes: list[Scope], params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._get(self, url, params, headers)

    def _post(self, url: str, scopes: list[Scope], form: dict=None, json: dict=None, buff=None, params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._post(self, url, form, json, buff, params, headers)

    def _put(self, url: str, scopes: list[Scope], form: dict=None, json: dict=None, buff=None, params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._put(self, url, form, json, buff, params, headers)

    def _delete(self, url: str, scopes: list[Scope], params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._delete(self, url, params, headers)

    def _set_auth_headers(self, headers: dict, scopes: list[Scope]):
        if not &#39;Authorization&#39; in headers:
            auth = self.token_provider.get_token(scopes)
            headers[&#39;Authorization&#39;] = &#39;Bearer {}&#39;.format(auth[&#39;access_token&#39;])</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient"><code class="flex name class">
<span>class <span class="ident">AuthenticationClient</span></span>
<span>(</span><span>base_url: str = 'https://developer.api.autodesk.com/authentication/v1')</span>
</code></dt>
<dd>
<div class="desc"><p>Forge Authentication service client.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http">https://forge.autodesk.com/en/docs/oauth/v2/reference/http</a></p>
<p>Create new instance of the client.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Base URL for API calls.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AuthenticationClient(BaseClient):
    &#34;&#34;&#34;
    Forge Authentication service client.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http
    &#34;&#34;&#34;

    def __init__(self, base_url: str=BASE_URL):
        &#34;&#34;&#34;
        Create new instance of the client.

        Args:
            base_url (str, optional): Base URL for API calls.
        &#34;&#34;&#34;
        BaseClient.__init__(self, base_url)

    def authenticate(self, client_id: str, client_secret: str, scopes: list[Scope]) -&gt; dict:
        &#34;&#34;&#34;
        Generate a two-legged access token for specific set of scopes.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authenticate-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            scopes (list[Scope]): List of required scopes.

        Returns:
            dict: Parsed response object with properties `access_token`, `token_type`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            client = AuthenticationClient()
            auth = client.authenticate(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, [Scope.ViewablesRead])
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;client_credentials&#39;,
            &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
        }
        return self._post(&#39;/authenticate&#39;, form=form).json()

    def get_authorization_url(self, client_id: str, response_type: str, redirect_uri: str, scopes: list[Scope], state: str=None) -&gt; str:
        &#34;&#34;&#34;
        Generate a URL to redirect an end user to in order to acquire the user’s consent
        for your app to access the specified resources.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authorize-GET

        Args:
            client_id (str): Client ID of the app.
            response_type (str): Must be either &#39;code&#39; for authorization code grant flow or &#39;token&#39; for implicit grant flow.
            redirect_uri (str): URL-encoded callback URL that the end user will be redirected to after completing the authorization flow.
            scopes (list[Scope]): List of required scopes.
            state (str, optional): Payload containing arbitrary data that the authentication flow will pass back verbatim in a state query parameter to the callback URL.

        Returns:
            str: Complete authorization URL.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            client = AuthenticationClient()
            url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
            print(url)
            ```
        &#34;&#34;&#34;
        url = &#39;https://developer.api.autodesk.com/authentication/v1/authorize&#39;
        url = url + &#39;?client_id={}&#39;.format(quote(client_id))
        url = url + &#39;&amp;response_type={}&#39;.format(response_type)
        url = url + &#39;&amp;redirect_uri={}&#39;.format(quote(redirect_uri))
        url = url + &#39;&amp;scope={}&#39;.format(quote(&#39; &#39;.join(map(lambda s: s.value, scopes))))
        if state:
            url += &#39;&amp;state={}&#39;.format(quote(state))
        return url

    def get_token(self, client_id: str, client_secret: str, code: str, redirect_uri: str) -&gt; dict:
        &#34;&#34;&#34;
        Exchange an authorization code extracted from `get_authorization_url` callback for a three-legged access token.
        This API will only be used when the &#39;Authorization Code&#39; grant type is being adopted.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/gettoken-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            code (str): The authorization code captured from the code query parameter when the user is redirected back to the callback URL.
            redirect_uri (str): Must match the redirect_uri parameter used in the `get_authorization_url`.

        Returns:
            dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            client = AuthenticationClient()
            url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
            # redirect the user to URL, and wait for callback to http://localhost:3000/callback
            code = &#39;...&#39; # extract &#39;code&#39; query parameter from the callback
            auth = client.get_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, code, &#34;http://localhost:3000/callback&#34;)
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;authorization_code&#39;,
            &#39;code&#39;: code,
            &#39;redirect_uri&#39;: redirect_uri
        }
        return self._post(&#39;/gettoken&#39;, form=form).json()

    def refresh_token(self, client_id: str, client_secret: str, refresh_token: str, scopes: list[Scope]) -&gt; dict:
        &#34;&#34;&#34;
        Acquire a new access token by using the refresh token provided by `get_token`.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/refreshtoken-POST

        Args:
            client_id (str): Client ID of the app.
            client_secret (str): Client secret of the app.
            refresh_token (str): Refresh token used to acquire a new access token.
            scopes (list[str]): List of required scopes.

        Returns:
            dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

        Examples:
            ```
            FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
            FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
            refresh_token = &#39;...&#39; # retrieve the refresh token, for example, from cookies
            client = AuthenticationClient()
            auth = client.refresh_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, refresh_token, [Scope.ViewablesRead])
            print(auth[&#34;access_token&#34;])
            ```
        &#34;&#34;&#34;
        form = {
            &#39;client_id&#39;: client_id,
            &#39;client_secret&#39;: client_secret,
            &#39;grant_type&#39;: &#39;refresh_token&#39;,
            &#39;refresh_token&#39;: refresh_token,
            &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
        }
        return self._post(&#39;/refreshtoken&#39;, form=form).json()

    def get_user_profile(self, access_token: str) -&gt; dict:
        &#34;&#34;&#34;
        Get the profile information of an authorizing end user in a three-legged context.

        **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/users-@me-GET

        Args:
            access_token (str): Token obtained via a three-legged OAuth flow.

        Returns:
            dict: Parsed response object with properties `userId`, `userName`, `emaillId`, `firstName`, `lastName`, etc.

        Examples:
            ```
            access_token = &#39;...&#39; # get a three-legged access token, for example, from cookies
            client = AuthenticationClient()
            info = client.get_user_profile(access_token)
            print(auth[&#34;userName&#34;])
            ```
        &#34;&#34;&#34;
        headers = { &#39;Authorization&#39;: &#39;Bearer {}&#39;.format(access_token) }
        return self._get(&#39;/users/@me&#39;, headers=headers).json()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.base.BaseClient" href="base.html#autodesk_forge_sdk.base.BaseClient">BaseClient</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient.authenticate"><code class="name flex">
<span>def <span class="ident">authenticate</span></span>(<span>self, client_id: str, client_secret: str, scopes: list) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Generate a two-legged access token for specific set of scopes.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authenticate-POST">https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authenticate-POST</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>client_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Client ID of the app.</dd>
<dt><strong><code>client_secret</code></strong> :&ensp;<code>str</code></dt>
<dd>Client secret of the app.</dd>
<dt><strong><code>scopes</code></strong> :&ensp;<code>list[<a title="autodesk_forge_sdk.auth.Scope" href="#autodesk_forge_sdk.auth.Scope">Scope</a>]</code></dt>
<dd>List of required scopes.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Parsed response object with properties <code>access_token</code>, <code>token_type</code>, and <code>expires_in</code>.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>FORGE_CLIENT_ID = os.environ[&quot;FORGE_CLIENT_ID&quot;]
FORGE_CLIENT_SECRET = os.environ[&quot;FORGE_CLIENT_SECRET&quot;]
client = AuthenticationClient()
auth = client.authenticate(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, [Scope.ViewablesRead])
print(auth[&quot;access_token&quot;])
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def authenticate(self, client_id: str, client_secret: str, scopes: list[Scope]) -&gt; dict:
    &#34;&#34;&#34;
    Generate a two-legged access token for specific set of scopes.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authenticate-POST

    Args:
        client_id (str): Client ID of the app.
        client_secret (str): Client secret of the app.
        scopes (list[Scope]): List of required scopes.

    Returns:
        dict: Parsed response object with properties `access_token`, `token_type`, and `expires_in`.

    Examples:
        ```
        FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
        FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
        client = AuthenticationClient()
        auth = client.authenticate(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, [Scope.ViewablesRead])
        print(auth[&#34;access_token&#34;])
        ```
    &#34;&#34;&#34;
    form = {
        &#39;client_id&#39;: client_id,
        &#39;client_secret&#39;: client_secret,
        &#39;grant_type&#39;: &#39;client_credentials&#39;,
        &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
    }
    return self._post(&#39;/authenticate&#39;, form=form).json()</code></pre>
</details>
</dd>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient.get_authorization_url"><code class="name flex">
<span>def <span class="ident">get_authorization_url</span></span>(<span>self, client_id: str, response_type: str, redirect_uri: str, scopes: list, state: str = None) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Generate a URL to redirect an end user to in order to acquire the user’s consent
for your app to access the specified resources.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authorize-GET">https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authorize-GET</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>client_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Client ID of the app.</dd>
<dt><strong><code>response_type</code></strong> :&ensp;<code>str</code></dt>
<dd>Must be either 'code' for authorization code grant flow or 'token' for implicit grant flow.</dd>
<dt><strong><code>redirect_uri</code></strong> :&ensp;<code>str</code></dt>
<dd>URL-encoded callback URL that the end user will be redirected to after completing the authorization flow.</dd>
<dt><strong><code>scopes</code></strong> :&ensp;<code>list[<a title="autodesk_forge_sdk.auth.Scope" href="#autodesk_forge_sdk.auth.Scope">Scope</a>]</code></dt>
<dd>List of required scopes.</dd>
<dt><strong><code>state</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Payload containing arbitrary data that the authentication flow will pass back verbatim in a state query parameter to the callback URL.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Complete authorization URL.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>FORGE_CLIENT_ID = os.environ[&quot;FORGE_CLIENT_ID&quot;]
client = AuthenticationClient()
url = client.get_authorization_url(FORGE_CLIENT_ID, &quot;code&quot;, &quot;http://localhost:3000/callback&quot;, [Scope.ViewablesRead])
print(url)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_authorization_url(self, client_id: str, response_type: str, redirect_uri: str, scopes: list[Scope], state: str=None) -&gt; str:
    &#34;&#34;&#34;
    Generate a URL to redirect an end user to in order to acquire the user’s consent
    for your app to access the specified resources.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/authorize-GET

    Args:
        client_id (str): Client ID of the app.
        response_type (str): Must be either &#39;code&#39; for authorization code grant flow or &#39;token&#39; for implicit grant flow.
        redirect_uri (str): URL-encoded callback URL that the end user will be redirected to after completing the authorization flow.
        scopes (list[Scope]): List of required scopes.
        state (str, optional): Payload containing arbitrary data that the authentication flow will pass back verbatim in a state query parameter to the callback URL.

    Returns:
        str: Complete authorization URL.

    Examples:
        ```
        FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
        client = AuthenticationClient()
        url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
        print(url)
        ```
    &#34;&#34;&#34;
    url = &#39;https://developer.api.autodesk.com/authentication/v1/authorize&#39;
    url = url + &#39;?client_id={}&#39;.format(quote(client_id))
    url = url + &#39;&amp;response_type={}&#39;.format(response_type)
    url = url + &#39;&amp;redirect_uri={}&#39;.format(quote(redirect_uri))
    url = url + &#39;&amp;scope={}&#39;.format(quote(&#39; &#39;.join(map(lambda s: s.value, scopes))))
    if state:
        url += &#39;&amp;state={}&#39;.format(quote(state))
    return url</code></pre>
</details>
</dd>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient.get_token"><code class="name flex">
<span>def <span class="ident">get_token</span></span>(<span>self, client_id: str, client_secret: str, code: str, redirect_uri: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Exchange an authorization code extracted from <code>get_authorization_url</code> callback for a three-legged access token.
This API will only be used when the 'Authorization Code' grant type is being adopted.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http/gettoken-POST">https://forge.autodesk.com/en/docs/oauth/v2/reference/http/gettoken-POST</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>client_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Client ID of the app.</dd>
<dt><strong><code>client_secret</code></strong> :&ensp;<code>str</code></dt>
<dd>Client secret of the app.</dd>
<dt><strong><code>code</code></strong> :&ensp;<code>str</code></dt>
<dd>The authorization code captured from the code query parameter when the user is redirected back to the callback URL.</dd>
<dt><strong><code>redirect_uri</code></strong> :&ensp;<code>str</code></dt>
<dd>Must match the redirect_uri parameter used in the <code>get_authorization_url</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Parsed response object with properties <code>token_type</code>, <code>access_token</code>, <code>refresh_token</code>, and <code>expires_in</code>.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>FORGE_CLIENT_ID = os.environ[&quot;FORGE_CLIENT_ID&quot;]
FORGE_CLIENT_SECRET = os.environ[&quot;FORGE_CLIENT_SECRET&quot;]
client = AuthenticationClient()
url = client.get_authorization_url(FORGE_CLIENT_ID, &quot;code&quot;, &quot;http://localhost:3000/callback&quot;, [Scope.ViewablesRead])
# redirect the user to URL, and wait for callback to &lt;http://localhost:3000/callback&gt;
code = '...' # extract 'code' query parameter from the callback
auth = client.get_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, code, &quot;http://localhost:3000/callback&quot;)
print(auth[&quot;access_token&quot;])
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_token(self, client_id: str, client_secret: str, code: str, redirect_uri: str) -&gt; dict:
    &#34;&#34;&#34;
    Exchange an authorization code extracted from `get_authorization_url` callback for a three-legged access token.
    This API will only be used when the &#39;Authorization Code&#39; grant type is being adopted.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/gettoken-POST

    Args:
        client_id (str): Client ID of the app.
        client_secret (str): Client secret of the app.
        code (str): The authorization code captured from the code query parameter when the user is redirected back to the callback URL.
        redirect_uri (str): Must match the redirect_uri parameter used in the `get_authorization_url`.

    Returns:
        dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

    Examples:
        ```
        FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
        FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
        client = AuthenticationClient()
        url = client.get_authorization_url(FORGE_CLIENT_ID, &#34;code&#34;, &#34;http://localhost:3000/callback&#34;, [Scope.ViewablesRead])
        # redirect the user to URL, and wait for callback to http://localhost:3000/callback
        code = &#39;...&#39; # extract &#39;code&#39; query parameter from the callback
        auth = client.get_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, code, &#34;http://localhost:3000/callback&#34;)
        print(auth[&#34;access_token&#34;])
        ```
    &#34;&#34;&#34;
    form = {
        &#39;client_id&#39;: client_id,
        &#39;client_secret&#39;: client_secret,
        &#39;grant_type&#39;: &#39;authorization_code&#39;,
        &#39;code&#39;: code,
        &#39;redirect_uri&#39;: redirect_uri
    }
    return self._post(&#39;/gettoken&#39;, form=form).json()</code></pre>
</details>
</dd>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient.get_user_profile"><code class="name flex">
<span>def <span class="ident">get_user_profile</span></span>(<span>self, access_token: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Get the profile information of an authorizing end user in a three-legged context.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http/users-@me-GET">https://forge.autodesk.com/en/docs/oauth/v2/reference/http/users-@me-GET</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>access_token</code></strong> :&ensp;<code>str</code></dt>
<dd>Token obtained via a three-legged OAuth flow.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Parsed response object with properties <code>userId</code>, <code>userName</code>, <code>emaillId</code>, <code>firstName</code>, <code>lastName</code>, etc.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>access_token = '...' # get a three-legged access token, for example, from cookies
client = AuthenticationClient()
info = client.get_user_profile(access_token)
print(auth[&quot;userName&quot;])
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_user_profile(self, access_token: str) -&gt; dict:
    &#34;&#34;&#34;
    Get the profile information of an authorizing end user in a three-legged context.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/users-@me-GET

    Args:
        access_token (str): Token obtained via a three-legged OAuth flow.

    Returns:
        dict: Parsed response object with properties `userId`, `userName`, `emaillId`, `firstName`, `lastName`, etc.

    Examples:
        ```
        access_token = &#39;...&#39; # get a three-legged access token, for example, from cookies
        client = AuthenticationClient()
        info = client.get_user_profile(access_token)
        print(auth[&#34;userName&#34;])
        ```
    &#34;&#34;&#34;
    headers = { &#39;Authorization&#39;: &#39;Bearer {}&#39;.format(access_token) }
    return self._get(&#39;/users/@me&#39;, headers=headers).json()</code></pre>
</details>
</dd>
<dt id="autodesk_forge_sdk.auth.AuthenticationClient.refresh_token"><code class="name flex">
<span>def <span class="ident">refresh_token</span></span>(<span>self, client_id: str, client_secret: str, refresh_token: str, scopes: list) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Acquire a new access token by using the refresh token provided by <code>get_token</code>.</p>
<p><strong>Documentation</strong>: <a href="https://forge.autodesk.com/en/docs/oauth/v2/reference/http/refreshtoken-POST">https://forge.autodesk.com/en/docs/oauth/v2/reference/http/refreshtoken-POST</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>client_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Client ID of the app.</dd>
<dt><strong><code>client_secret</code></strong> :&ensp;<code>str</code></dt>
<dd>Client secret of the app.</dd>
<dt><strong><code>refresh_token</code></strong> :&ensp;<code>str</code></dt>
<dd>Refresh token used to acquire a new access token.</dd>
<dt><strong><code>scopes</code></strong> :&ensp;<code>list[str]</code></dt>
<dd>List of required scopes.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Parsed response object with properties <code>token_type</code>, <code>access_token</code>, <code>refresh_token</code>, and <code>expires_in</code>.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>FORGE_CLIENT_ID = os.environ[&quot;FORGE_CLIENT_ID&quot;]
FORGE_CLIENT_SECRET = os.environ[&quot;FORGE_CLIENT_SECRET&quot;]
refresh_token = '...' # retrieve the refresh token, for example, from cookies
client = AuthenticationClient()
auth = client.refresh_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, refresh_token, [Scope.ViewablesRead])
print(auth[&quot;access_token&quot;])
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def refresh_token(self, client_id: str, client_secret: str, refresh_token: str, scopes: list[Scope]) -&gt; dict:
    &#34;&#34;&#34;
    Acquire a new access token by using the refresh token provided by `get_token`.

    **Documentation**: https://forge.autodesk.com/en/docs/oauth/v2/reference/http/refreshtoken-POST

    Args:
        client_id (str): Client ID of the app.
        client_secret (str): Client secret of the app.
        refresh_token (str): Refresh token used to acquire a new access token.
        scopes (list[str]): List of required scopes.

    Returns:
        dict: Parsed response object with properties `token_type`, `access_token`, `refresh_token`, and `expires_in`.

    Examples:
        ```
        FORGE_CLIENT_ID = os.environ[&#34;FORGE_CLIENT_ID&#34;]
        FORGE_CLIENT_SECRET = os.environ[&#34;FORGE_CLIENT_SECRET&#34;]
        refresh_token = &#39;...&#39; # retrieve the refresh token, for example, from cookies
        client = AuthenticationClient()
        auth = client.refresh_token(FORGE_CLIENT_ID, FORGE_CLIENT_SECRET, refresh_token, [Scope.ViewablesRead])
        print(auth[&#34;access_token&#34;])
        ```
    &#34;&#34;&#34;
    form = {
        &#39;client_id&#39;: client_id,
        &#39;client_secret&#39;: client_secret,
        &#39;grant_type&#39;: &#39;refresh_token&#39;,
        &#39;refresh_token&#39;: refresh_token,
        &#39;scope&#39;: &#39; &#39;.join(map(lambda s: s.value, scopes))
    }
    return self._post(&#39;/refreshtoken&#39;, form=form).json()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="autodesk_forge_sdk.auth.BaseOAuthClient"><code class="flex name class">
<span>class <span class="ident">BaseOAuthClient</span></span>
<span>(</span><span>token_provider: <a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a>, base_url: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Create new instance of the client.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>token_provider</code></strong> :&ensp;<code><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></code></dt>
<dd>Provider that will be used to generate access tokens for API calls.</dd>
<dt><strong><code>base_url</code></strong> :&ensp;<code>str</code></dt>
<dd>Base URL for API calls.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BaseOAuthClient(BaseClient):
    def __init__(self, token_provider: TokenProviderInterface, base_url: str):
        &#34;&#34;&#34;
        Create new instance of the client.

        Args:
            token_provider (TokenProviderInterface): Provider that will be used to generate access tokens for API calls.
            base_url (str): Base URL for API calls.
        &#34;&#34;&#34;
        BaseClient.__init__(self, base_url)
        self.token_provider = token_provider

    def _get(self, url: str, scopes: list[Scope], params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._get(self, url, params, headers)

    def _post(self, url: str, scopes: list[Scope], form: dict=None, json: dict=None, buff=None, params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._post(self, url, form, json, buff, params, headers)

    def _put(self, url: str, scopes: list[Scope], form: dict=None, json: dict=None, buff=None, params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._put(self, url, form, json, buff, params, headers)

    def _delete(self, url: str, scopes: list[Scope], params: dict=None, headers: dict=None):
        if not headers:
            headers = {}
        self._set_auth_headers(headers, scopes)
        return BaseClient._delete(self, url, params, headers)

    def _set_auth_headers(self, headers: dict, scopes: list[Scope]):
        if not &#39;Authorization&#39; in headers:
            auth = self.token_provider.get_token(scopes)
            headers[&#39;Authorization&#39;] = &#39;Bearer {}&#39;.format(auth[&#39;access_token&#39;])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.base.BaseClient" href="base.html#autodesk_forge_sdk.base.BaseClient">BaseClient</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.md.ModelDerivativeClient" href="md.html#autodesk_forge_sdk.md.ModelDerivativeClient">ModelDerivativeClient</a></li>
<li><a title="autodesk_forge_sdk.oss.OSSClient" href="oss.html#autodesk_forge_sdk.oss.OSSClient">OSSClient</a></li>
</ul>
</dd>
<dt id="autodesk_forge_sdk.auth.OAuthTokenProvider"><code class="flex name class">
<span>class <span class="ident">OAuthTokenProvider</span></span>
<span>(</span><span>client_id: str, client_secret: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that automatically generates (and caches) access tokens using specific app credentials.</p>
<p>Create new instance of the provider.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>client_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Application client ID.</dd>
<dt><strong><code>client_secret</code></strong> :&ensp;<code>str</code></dt>
<dd>Application client secret.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OAuthTokenProvider(TokenProviderInterface):
    &#34;&#34;&#34;
    Helper class that automatically generates (and caches) access tokens using specific app credentials.
    &#34;&#34;&#34;

    def __init__(self, client_id: str, client_secret: str):
        &#34;&#34;&#34;
        Create new instance of the provider.

        Args:
            client_id (str): Application client ID.
            client_secret (str): Application client secret.
        &#34;&#34;&#34;
        self.client_id = client_id
        self.client_secret = client_secret
        self.auth_client = AuthenticationClient()
        self.cache = {}

    def get_token(self, scopes: list[Scope]) -&gt; str:
        cache_key = &#39;+&#39;.join(map(lambda s: s.value, scopes))
        now = datetime.now()
        if cache_key in self.cache:
            auth = self.cache[cache_key]
            if auth[&#39;expires_at&#39;] &gt; now:
                return auth
        auth = self.auth_client.authenticate(self.client_id, self.client_secret, scopes)
        auth[&#39;expires_at&#39;] = now + timedelta(0, auth[&#39;expires_in&#39;])
        return auth</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></b></code>:
<ul class="hlist">
<li><code><a title="autodesk_forge_sdk.auth.TokenProviderInterface.get_token" href="#autodesk_forge_sdk.auth.TokenProviderInterface.get_token">get_token</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope"><code class="flex name class">
<span>class <span class="ident">Scope</span></span>
<span>(</span><span>value, names=None, *, module=None, qualname=None, type=None, start=1)</span>
</code></dt>
<dd>
<div class="desc"><p>Authentication scopes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Scope(Enum):
    &#34;&#34;&#34;
    Authentication scopes.
    &#34;&#34;&#34;
    UserProfileRead = &#39;user-profile:read&#39;
    &#34;&#34;&#34;The application will be able to read the end user’s profile data (not including associated products and services).&#34;&#34;&#34;
    UserRead = &#39;user:read&#39;
    &#34;&#34;&#34;The application will be able to read the end user’s profile data, including associated products and services.&#34;&#34;&#34;
    UserWrite = &#39;user:write&#39;
    &#34;&#34;&#34;The application will be able to create, update, and delete the end user’s profile data, including associated products and services.&#34;&#34;&#34;
    ViewablesRead = &#39;viewables:read&#39;
    &#34;&#34;&#34;The application will only be able to read the end user’s viewable data (e.g., PNG and SVF files) within the Autodesk ecosystem.&#34;&#34;&#34;
    DataRead = &#39;data:read&#39;
    &#34;&#34;&#34;The application will be able to read all the end user’s data (viewable and non-viewable) within the Autodesk ecosystem.&#34;&#34;&#34;
    DataWrite = &#39;data:write&#39;
    &#34;&#34;&#34;The application will be able to create, update, and delete data on behalf of the end user within the Autodesk ecosystem.&#34;&#34;&#34;
    DataCreate = &#39;data:create&#39;
    &#34;&#34;&#34;The application will be able to create data on behalf of the end user within the Autodesk ecosystem.&#34;&#34;&#34;
    DataSearch = &#39;data:search&#39;
    &#34;&#34;&#34;The application will be able to search the end user’s data within the Autodesk ecosystem.&#34;&#34;&#34;
    BucketCreate = &#39;bucket:create&#39;
    &#34;&#34;&#34;The application will be able to create an OSS bucket it will own.&#34;&#34;&#34;
    BucketRead = &#39;bucket:read&#39;
    &#34;&#34;&#34;The application will be able to read the metadata and list contents for OSS buckets that it has access to.&#34;&#34;&#34;
    BucketUpdate = &#39;bucket:update&#39;
    &#34;&#34;&#34;The application will be able to set permissions and entitlements for OSS buckets that it has permission to modify.&#34;&#34;&#34;
    BucketDelete = &#39;bucket:delete&#39;
    &#34;&#34;&#34;The application will be able to delete a bucket that it has permission to delete.&#34;&#34;&#34;
    CodeAll = &#39;code:all&#39;
    &#34;&#34;&#34;The application will be able to author and execute code on behalf of the end user (e.g., scripts processed by the Design Automation API).&#34;&#34;&#34;
    AccountRead = &#39;account:read&#39;
    &#34;&#34;&#34;For Product APIs, the application will be able to read the account data the end user has entitlements to.&#34;&#34;&#34;
    AccountWrite = &#39;account:wriet&#39;
    &#34;&#34;&#34;For Product APIs, the application will be able to update the account data the end user has entitlements to.&#34;&#34;&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="autodesk_forge_sdk.auth.Scope.AccountRead"><code class="name">var <span class="ident">AccountRead</span></code></dt>
<dd>
<div class="desc"><p>For Product APIs, the application will be able to read the account data the end user has entitlements to.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.AccountWrite"><code class="name">var <span class="ident">AccountWrite</span></code></dt>
<dd>
<div class="desc"><p>For Product APIs, the application will be able to update the account data the end user has entitlements to.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.BucketCreate"><code class="name">var <span class="ident">BucketCreate</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to create an OSS bucket it will own.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.BucketDelete"><code class="name">var <span class="ident">BucketDelete</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to delete a bucket that it has permission to delete.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.BucketRead"><code class="name">var <span class="ident">BucketRead</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to read the metadata and list contents for OSS buckets that it has access to.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.BucketUpdate"><code class="name">var <span class="ident">BucketUpdate</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to set permissions and entitlements for OSS buckets that it has permission to modify.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.CodeAll"><code class="name">var <span class="ident">CodeAll</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to author and execute code on behalf of the end user (e.g., scripts processed by the Design Automation API).</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.DataCreate"><code class="name">var <span class="ident">DataCreate</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to create data on behalf of the end user within the Autodesk ecosystem.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.DataRead"><code class="name">var <span class="ident">DataRead</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to read all the end user’s data (viewable and non-viewable) within the Autodesk ecosystem.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.DataSearch"><code class="name">var <span class="ident">DataSearch</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to search the end user’s data within the Autodesk ecosystem.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.DataWrite"><code class="name">var <span class="ident">DataWrite</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to create, update, and delete data on behalf of the end user within the Autodesk ecosystem.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.UserProfileRead"><code class="name">var <span class="ident">UserProfileRead</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to read the end user’s profile data (not including associated products and services).</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.UserRead"><code class="name">var <span class="ident">UserRead</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to read the end user’s profile data, including associated products and services.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.UserWrite"><code class="name">var <span class="ident">UserWrite</span></code></dt>
<dd>
<div class="desc"><p>The application will be able to create, update, and delete the end user’s profile data, including associated products and services.</p></div>
</dd>
<dt id="autodesk_forge_sdk.auth.Scope.ViewablesRead"><code class="name">var <span class="ident">ViewablesRead</span></code></dt>
<dd>
<div class="desc"><p>The application will only be able to read the end user’s viewable data (e.g., PNG and SVF files) within the Autodesk ecosystem.</p></div>
</dd>
</dl>
</dd>
<dt id="autodesk_forge_sdk.auth.SimpleTokenProvider"><code class="flex name class">
<span>class <span class="ident">SimpleTokenProvider</span></span>
<span>(</span><span>access_token: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Simple implementation of <code><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></code> when you already have an access token that you want to use.
When using this approach, make sure that the hard-coded access token supports all the scopes that may be needed.</p>
<p>Create new instance of the provider.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>access_token</code></strong> :&ensp;<code>str</code></dt>
<dd>Token that will always be returned by <code><a title="autodesk_forge_sdk.auth.SimpleTokenProvider.get_token" href="#autodesk_forge_sdk.auth.TokenProviderInterface.get_token">SimpleTokenProvider.get_token()</a></code>.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SimpleTokenProvider(TokenProviderInterface):
    &#34;&#34;&#34;
    Simple implementation of `TokenProviderInterface` when you already have an access token that you want to use.
    When using this approach, make sure that the hard-coded access token supports all the scopes that may be needed.
    &#34;&#34;&#34;

    def __init__(self, access_token: str):
        &#34;&#34;&#34;
        Create new instance of the provider.

        Args:
            access_token (str): Token that will always be returned by `SimpleTokenProvider.get_token`.
        &#34;&#34;&#34;
        self.access_token = access_token

    def get_token(self, scopes: list[Scope]) -&gt; str:
        return self.access_token</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></b></code>:
<ul class="hlist">
<li><code><a title="autodesk_forge_sdk.auth.TokenProviderInterface.get_token" href="#autodesk_forge_sdk.auth.TokenProviderInterface.get_token">get_token</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="autodesk_forge_sdk.auth.TokenProviderInterface"><code class="flex name class">
<span>class <span class="ident">TokenProviderInterface</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TokenProviderInterface:
    def get_token(self, scopes: list[Scope]) -&gt; str:
        &#34;&#34;&#34;
        Generates access token for given set of scopes.

        Args:
            scopes (list[Scope]): List of scopes that the generated access token should support.

        Returns:
            str: Access token.
        &#34;&#34;&#34;
        pass</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="autodesk_forge_sdk.auth.OAuthTokenProvider" href="#autodesk_forge_sdk.auth.OAuthTokenProvider">OAuthTokenProvider</a></li>
<li><a title="autodesk_forge_sdk.auth.SimpleTokenProvider" href="#autodesk_forge_sdk.auth.SimpleTokenProvider">SimpleTokenProvider</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="autodesk_forge_sdk.auth.TokenProviderInterface.get_token"><code class="name flex">
<span>def <span class="ident">get_token</span></span>(<span>self, scopes: list) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Generates access token for given set of scopes.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>scopes</code></strong> :&ensp;<code>list[<a title="autodesk_forge_sdk.auth.Scope" href="#autodesk_forge_sdk.auth.Scope">Scope</a>]</code></dt>
<dd>List of scopes that the generated access token should support.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Access token.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_token(self, scopes: list[Scope]) -&gt; str:
    &#34;&#34;&#34;
    Generates access token for given set of scopes.

    Args:
        scopes (list[Scope]): List of scopes that the generated access token should support.

    Returns:
        str: Access token.
    &#34;&#34;&#34;
    pass</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="autodesk_forge_sdk" href="index.html">autodesk_forge_sdk</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.AuthenticationClient" href="#autodesk_forge_sdk.auth.AuthenticationClient">AuthenticationClient</a></code></h4>
<ul class="">
<li><code><a title="autodesk_forge_sdk.auth.AuthenticationClient.authenticate" href="#autodesk_forge_sdk.auth.AuthenticationClient.authenticate">authenticate</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.AuthenticationClient.get_authorization_url" href="#autodesk_forge_sdk.auth.AuthenticationClient.get_authorization_url">get_authorization_url</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.AuthenticationClient.get_token" href="#autodesk_forge_sdk.auth.AuthenticationClient.get_token">get_token</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.AuthenticationClient.get_user_profile" href="#autodesk_forge_sdk.auth.AuthenticationClient.get_user_profile">get_user_profile</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.AuthenticationClient.refresh_token" href="#autodesk_forge_sdk.auth.AuthenticationClient.refresh_token">refresh_token</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.BaseOAuthClient" href="#autodesk_forge_sdk.auth.BaseOAuthClient">BaseOAuthClient</a></code></h4>
</li>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.OAuthTokenProvider" href="#autodesk_forge_sdk.auth.OAuthTokenProvider">OAuthTokenProvider</a></code></h4>
</li>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.Scope" href="#autodesk_forge_sdk.auth.Scope">Scope</a></code></h4>
<ul class="two-column">
<li><code><a title="autodesk_forge_sdk.auth.Scope.AccountRead" href="#autodesk_forge_sdk.auth.Scope.AccountRead">AccountRead</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.AccountWrite" href="#autodesk_forge_sdk.auth.Scope.AccountWrite">AccountWrite</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.BucketCreate" href="#autodesk_forge_sdk.auth.Scope.BucketCreate">BucketCreate</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.BucketDelete" href="#autodesk_forge_sdk.auth.Scope.BucketDelete">BucketDelete</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.BucketRead" href="#autodesk_forge_sdk.auth.Scope.BucketRead">BucketRead</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.BucketUpdate" href="#autodesk_forge_sdk.auth.Scope.BucketUpdate">BucketUpdate</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.CodeAll" href="#autodesk_forge_sdk.auth.Scope.CodeAll">CodeAll</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.DataCreate" href="#autodesk_forge_sdk.auth.Scope.DataCreate">DataCreate</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.DataRead" href="#autodesk_forge_sdk.auth.Scope.DataRead">DataRead</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.DataSearch" href="#autodesk_forge_sdk.auth.Scope.DataSearch">DataSearch</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.DataWrite" href="#autodesk_forge_sdk.auth.Scope.DataWrite">DataWrite</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.UserProfileRead" href="#autodesk_forge_sdk.auth.Scope.UserProfileRead">UserProfileRead</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.UserRead" href="#autodesk_forge_sdk.auth.Scope.UserRead">UserRead</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.UserWrite" href="#autodesk_forge_sdk.auth.Scope.UserWrite">UserWrite</a></code></li>
<li><code><a title="autodesk_forge_sdk.auth.Scope.ViewablesRead" href="#autodesk_forge_sdk.auth.Scope.ViewablesRead">ViewablesRead</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.SimpleTokenProvider" href="#autodesk_forge_sdk.auth.SimpleTokenProvider">SimpleTokenProvider</a></code></h4>
</li>
<li>
<h4><code><a title="autodesk_forge_sdk.auth.TokenProviderInterface" href="#autodesk_forge_sdk.auth.TokenProviderInterface">TokenProviderInterface</a></code></h4>
<ul class="">
<li><code><a title="autodesk_forge_sdk.auth.TokenProviderInterface.get_token" href="#autodesk_forge_sdk.auth.TokenProviderInterface.get_token">get_token</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>